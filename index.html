<!doctype html>
<html lang="ml">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>H2-EDAPAL-2025 ‚Äî Humanities Study (Full details)</title>
<meta name="description" content="Kerala +2 Humanities detailed notes: Malayalam, English, History, Political Science, Sociology ‚Äî chapter-wise explanations & probable questions." />
<style>
  :root{--bg:#f7fafc;--card:#fff;--accent:#0b74d1;--muted:#6b7280}
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,'Noto Sans Malayalam',sans-serif;background:var(--bg);color:#0f172a}
  header{background:var(--accent);color:#fff;padding:14px 12px}
  .wrap{max-width:1100px;margin:14px auto;padding:12px}
  .toprow{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-bottom:12px}
  select, input.search{padding:10px;border-radius:10px;border:1px solid rgba(2,6,23,.06)}
  .btn{padding:8px 10px;border-radius:8px;background:var(--accent);color:#fff;border:none;cursor:pointer}
  main{display:grid;grid-template-columns:320px 1fr;gap:14px}
  .left{max-height:75vh;overflow:auto}
  .right{max-height:75vh;overflow:auto;background:var(--card);padding:14px;border-radius:12px;box-shadow:0 6px 16px rgba(2,6,23,.04)}
  .subjects{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px;margin-bottom:16px}
  .subject-card{background:var(--card);padding:14px;border-radius:12px;box-shadow:0 6px 20px rgba(2,6,23,.06);cursor:pointer;border:2px solid transparent;transition:transform .12s, border-color .12s}
  .subject-card.active{border-color:rgba(11,116,209,.32)}
  .muted{color:var(--muted)}
  .unit-list{list-style:none;padding:0;margin:0}
  .unit-list li{padding:8px;border-radius:8px;margin-bottom:8px;cursor:pointer;border:1px solid rgba(15,23,42,.04);display:flex;align-items:flex-start;gap:8px}
  .chapter{padding:12px;border-radius:10px;margin:10px 0;border:1px dashed rgba(15,23,42,.06);background:#fbfdff}
  .note{width:100%;min-height:100px;padding:10px;border-radius:8px;border:1px solid rgba(2,6,23,.06);margin-top:8px}
  .meta{font-size:13px;color:var(--muted);margin-top:6px}
  .small{font-size:13px;color:#374151}
  footer{margin-top:12px;color:var(--muted);font-size:13px;text-align:center}
  .pill{display:inline-block;padding:6px 10px;border-radius:999px;background:#eef2ff;color:#3730a3;font-weight:700;margin-right:8px}
  @media(max-width:880px){ main{grid-template-columns:1fr} .left{order:2} .right{order:1} }
</style>
</head>
<body>
<header>
  <div style="max-width:1100px;margin:auto;display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap">
    <div>
      <h1 style="margin:0">H2-EDAPAL-2025</h1>
      <div class="muted" style="margin-top:6px">Humanities ‚Äî Malayalam | English | History | Political Science | Sociology ‚Äî Chapter-wise full notes</div>
    </div>
    <div style="display:flex;gap:8px;align-items:center">
      <label for="syllabusSelect" style="color:#fff;margin-right:6px;font-weight:600">Syllabus</label>
      <select id="syllabusSelect" title="Choose syllabus">
        <option value="kerala">Kerala HSE (2025‚Äì26)</option>
      </select>
    </div>
  </div>
</header>

<div class="wrap">
  <div class="toprow">
    <input id="search" class="search" placeholder="Chapter / Topic ‡¥§‡¥ø‡¥∞‡¥Ø‡µÇ‚Ä¶" style="flex:1" />
    <button id="plan80" class="btn">üéØ 80% Plan</button>
  </div>

  <main>
    <div class="left">
      <div id="subjects" class="subjects"></div>
      <div style="margin-top:12px">
        <div style="font-weight:700;margin-bottom:6px">Progress & Notes</div>
        <div class="muted" style="font-size:13px">Notes autosave & saved per syllabus on this device.</div>
      </div>
    </div>

    <div class="right" id="viewer">
      <div id="empty" style="text-align:center;padding:30px">
        <div style="font-weight:700;font-size:18px">Subject ‡¥§‡¥ø‡¥∞‡¥û‡µç‡¥û‡µÜ‡¥ü‡µÅ‡¥ï‡µç‡¥ï‡µÇ</div>
        <div class="muted" style="margin-top:6px">Subject click ‡¥ö‡µÜ‡¥Ø‡µç‚Äå‡¥§‡¥æ‡µΩ chapters list ‡¥ï‡¥æ‡¥£‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥Ç. Chapter open ‡¥ö‡µÜ‡¥Ø‡µç‡¥§‡µç full details ‡¥ï‡¥æ‡¥£‡µÅ‡¥ï.</div>
      </div>
    </div>
  </main>

  <footer>Created for H2-EDAPAL-2025 ‚Ä¢ Notes authored to be concise and exam-focused. Edit data inside script to match your exact school syllabus.</footer>
</div>

<script>
/* ---------------- FULL DETAILED SYLLABUS (Kerala HSE +2 Humanities) ----------------
   Each chapter includes:
   - details: explanation, key points, examples
   - probable: short list of probable questions
   - memory: quick mnemonic / memory hook
*/
const SYLLABUS = {
  "Malayalam": {
    year:"2025‚Äì26",
    units:[
      {name:"Unit I ‚Äî ‡¥∏‡¥æ‡¥π‡¥ø‡¥§‡µç‡¥Ø‡¥Ç (‡¥µ‡µç‡¥Ø‡¥§‡µç‡¥Ø‡¥∏‡µç‡¥§ ‡¥∞‡¥ö‡¥®‡¥ï‡µæ)", chapters:[
        {title:"‡¥ï‡¥µ‡¥ø‡¥§‡¥æ ‡¥∂‡µá‡¥ñ‡¥∞‡¥Ç ‚Äî ‡¥§‡µÜ‡¥≥‡¥ø‡¥Ø‡µΩ (Selected Poems)", 
         details:
`‡¥ï‡¥µ‡¥ø‡¥§‡¥æ ‡¥≠‡¥æ‡¥ó‡¥Ç: ‡¥ï‡µÉ‡¥§‡¥ø‡¥ï‡¥≥‡µÅ‡¥ü‡µÜ ‡¥ö‡µÅ‡¥∞‡µÅ‡¥ï‡µç‡¥ï‡¥Æ‡¥æ‡¥Ø ‡¥µ‡¥ø‡¥µ‡¥∞‡¥£‡¥Ç, ‡¥ï‡¥µ‡¥ø‡¥§‡¥Ø‡µÅ‡¥ü‡µÜ ‡¥Æ‡µÅ‡¥ñ‡µç‡¥Ø ‡¥Ü‡¥∂‡¥Ø‡¥Ç, ‡¥≠‡¥æ‡¥∑‡¥æ‡¥∂‡µà‡¥≤‡¥ø, ‡¥™‡µç‡¥∞‡¥§‡µÄ‡¥ï‡¥™‡µç‡¥∞‡¥Ø‡µã‡¥ó‡¥ô‡µç‡¥ô‡¥≥‡µç‚Äç. 
Example: ‡¥í‡¥∞‡µÅ ‡¥™‡µç‡¥∞‡¥Æ‡¥æ‡¥£‡¥ï‡¥µ‡¥ø‡¥§‡¥Ø‡¥ø‡¥≤‡µÜ '‡¥™‡µç‡¥∞‡¥ï‡µÉ‡¥§‡¥ø‡¥Ø‡µÅ‡¥ü‡µÜ ‡¥™‡µÅ‡¥®‡¥∞‡µÇ‡¥π‡¥ø' ‡¥é‡¥®‡µç‡¥® ‡¥Ü‡¥∂‡¥Ø‡¥Ç ‡¥é‡¥ô‡µç‡¥ô‡¥®‡µÜ‡¥Ø‡¥æ‡¥£‡µç ‡¥Ö‡¥≠‡¥ø‡¥µ‡µç‡¥Ø‡¥ï‡µç‡¥§‡¥Æ‡¥æ‡¥ï‡µÅ‡¥®‡µç‡¥®‡¥§‡µç ‚Äî ‡¥ö‡¥ø‡¥§‡µç‡¥∞‡¥ô‡µç‡¥ô‡µæ, ‡¥â‡¥™‡¥Æ‡¥ï‡¥≥‡µç‚Äç, ‡¥∂‡¥¨‡µç‡¥¶‡¥Ç ‡¥é‡¥®‡µç‡¥®‡¥ø‡¥µ ‡¥â‡¥™‡¥Ø‡µã‡¥ó‡¥ø‡¥ö‡µç‡¥ö‡µÅ ‡¥µ‡¥ø‡¥∂‡¥¶‡µÄ‡¥ï‡¥∞‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï.` ,
         probable:
`1) ‡¥è‡¥§‡µç ‡¥ï‡¥µ‡¥ø‡¥§‡¥Ø‡µÅ‡¥ü‡µÜ ‡¥Æ‡µÅ‡¥ñ‡µç‡¥Ø ‡¥Ü‡¥∂‡¥Ø‡¥Ç ‡¥é‡¥¥‡µÅ‡¥§‡µÅ‡¥ï (6).
2) ‡¥í‡¥∞‡µÅ stanza-‡¥®‡µç‡¥±‡µÜ ‡¥Ö‡¥∞‡µç‚Äç‡¥§‡µç‡¥•‡¥Ç ‡¥µ‡¥ø‡¥∂‡¥¶‡µÄ‡¥ï‡¥∞‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï (4).
3) ‡¥ï‡¥µ‡¥ø‡¥Ø‡µÅ‡¥ü‡µÜ ‡¥∂‡µà‡¥≤‡¥ø/‡¥™‡µç‡¥∞‡¥§‡µÄ‡¥ï‡¥ô‡µç‡¥ô‡¥≥‡µç‚Äç ‡¥ö‡µÅ‡¥∞‡µÅ‡¥ï‡µç‡¥ï‡¥§‡µç‡¥§‡¥ø‡µΩ ‡¥µ‡¥ø‡¥∂‡¥¶‡µÄ‡¥ï‡¥∞‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï (3).`,
         memory:"‡¥ï‡¥µ‡¥ø‡¥§‡¥Ø‡µÅ‡¥ü‡µÜ ‚Äò3P‚Äô ‚Äî Poet, Purpose, Picture (‡¥ö‡¥ø‡¥§‡µç‡¥∞‡µÄ‡¥ï‡¥∞‡¥£‡¥Ç)"},
        {title:"‡¥ö‡µÜ‡¥±‡µÅ‡¥ï‡¥• ‚Äî ‡¥Ü‡¥µ‡¥ø‡¥∑‡µç‡¥ï‡¥æ‡¥∞‡¥Ç (Short Stories)", 
         details:
`‡¥ö‡µÜ‡¥±‡µÅ‡¥ï‡¥•‡¥ï‡¥≥‡¥ø‡µΩ ‡¥∏‡¥æ‡¥∞‡¥Ç, conflict, character arc ‡¥é‡¥®‡µç‡¥®‡¥ø‡¥µ ‡¥™‡µç‡¥∞‡¥§‡µç‡¥Ø‡µá‡¥ï ‡¥∂‡µç‡¥∞‡¥¶‡µç‡¥ß‡¥µ‡µá‡¥£‡¥Ç. ‡¥ï‡¥•‡¥Ø‡µÅ‡¥ü‡µÜ ‡¥™‡¥∂‡µç‡¥ö‡¥æ‡¥§‡µç‡¥§‡¥≤‡¥Ç, ‡¥ï‡¥•‡¥æ‡¥™‡¥æ‡¥§‡µç‡¥∞‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥™‡µç‡¥∞‡µá‡¥∞‡¥£, ‡¥ï‡¥•‡¥Ø‡µç‡¥ï‡µç‡¥ï‡µç ‡¥â‡¥£‡µç‡¥ü‡¥æ‡¥ï‡µÅ‡¥®‡µç‡¥® moral/lesson ‡¥é‡¥®‡µç‡¥®‡¥ø‡¥µ‡¥≥‡µÜ ‡¥ï‡µÅ‡¥±‡¥ø‡¥ö‡µç‡¥ö‡µç ‡¥ï‡µÅ‡¥±‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï. 
Example: ‡¥í‡¥∞‡µÅ ‡¥ö‡µÜ‡¥±‡µÅ‡¥ï‡¥•‡¥Ø‡µÅ‡¥ü‡µÜ ending open ‡¥Ü‡¥£‡µÜ‡¥ô‡µç‡¥ï‡¥ø‡µΩ ‡¥Ö‡¥§‡µç ‡¥é‡¥¥‡µÅ‡¥§‡¥ø‡¥Ø‡µÅ‡¥≥‡µç‡¥≥ writer-‡¥®‡µç‡¥±‡µÜ message ‡¥é‡¥®‡µç‡¥§‡µÜ‡¥®‡µç‡¥®‡µç ‡¥ï‡¥£‡µç‡¥ü‡µÜ‡¥§‡µç‡¥§‡µÅ‡¥ï.` ,
         probable:
`1) ‡¥™‡µç‡¥∞‡¥µ‡¥æ‡¥ö‡¥ï‡¥§‡µç‡¥§‡¥ø‡¥®‡µç‡¥±‡µÜ ‡¥Æ‡µÅ‡¥ñ‡µç‡¥Ø ‡¥ï‡¥•‡¥æ‡¥™‡¥æ‡¥§‡µç‡¥∞‡¥§‡µç‡¥§‡µÜ ‡¥µ‡¥ø‡¥∂‡¥ï‡¥≤‡¥®‡¥Ç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥ï (4).
2) ‡¥ï‡¥•‡¥Ø‡µÅ‡¥ü‡µÜ conflict ‡¥é‡¥ô‡µç‡¥ô‡¥®‡µÜ resolve‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡¥™‡µç‡¥™‡µÜ‡¥ü‡µÅ‡¥®‡µç‡¥®‡µÅ? (6).`,
         memory:"CHAR ‚Äî Character / Action / Result"}
      ]},
      {name:"Unit II ‚Äî ‡¥®‡¥æ‡¥ü‡¥ï‡¥µ‡µÅ‡¥Ç ‡¥≤‡µá‡¥ñ‡¥®‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥Ç", chapters:[
        {title:"‡¥®‡¥æ‡¥ü‡¥ï‡¥Ç ‚Äî ‡¥∏‡¥¶‡µÉ‡¥∂‡µç‡¥Ø‡¥ô‡µç‡¥ô‡µæ", 
         details:
`Drama: stage directions, dialogues, characterization, social context. Plays often examine social issues; note scene-wise summary and important dialogues. 
Tip: Exam question may ask 'Explain the role of protagonist in shaping theme' ‚Äî base answer on scenes & dialogues.` ,
         probable:
`1) ‡¥í‡¥∞‡µÅ ‡¥™‡µç‡¥∞‡¥ß‡¥æ‡¥® ‡¶¶‡ßÉ‡¥∂‡µç‡¥Ø‡¥§‡µç‡¥§‡¥ø‡¥®‡µç‡¥±‡µÜ ‡¥∏‡¥æ‡¥∞‡¥æ‡¥Ç‡¥∂‡¥Ç ‡¥é‡¥¥‡µÅ‡¥§‡µÅ‡¥ï (4).
2) ‡¥∏‡¥Ç‡¥≠‡¥æ‡¥∑‡¥£‡¥§‡µç‡¥§‡¥ø‡µΩ ‡¥™‡µç‡¥∞‡¥§‡µç‡¥Ø‡¥ï‡µç‡¥∑‡¥™‡µç‡¥™‡µÜ‡¥ü‡µç‡¥ü conflict ‡¥µ‡¥ø‡¥∂‡¥¶‡µÄ‡¥ï‡¥∞‡¥ø‡¥ï‡µç‡¥ï‡µÇ (6).`,
         memory:"D-SD ‚Äî Dialogue, Scene, Development"},
        {title:"‡¥≤‡µá‡¥ñ‡¥®‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥Ç ‡¥®‡¥ø‡¥¨‡¥®‡µç‡¥ß‡¥®‡¥ï‡¥≥‡µÅ‡¥Ç", 
         details:
`Essay & article writing: structure ‚Äî introduction, body, conclusion. Use examples, statistics (if any), and clear paragraphs. Practice writing short essays (100‚Äì150 words) on common topics.` ,
         probable:
`1) 10-mark essay: discuss importance of language in modern life.
2) 5-mark: write a short article on environmental awareness.`,
         memory:"Intro-3Body-Conclusion"}
      ]},
      {name:"Unit III ‚Äî ‡¥≠‡¥æ‡¥∑‡¥æ‡¥∂‡¥æ‡¥∏‡µç‡¥§‡µç‡¥∞‡¥µ‡µÅ‡¥Ç ‡¥™‡µç‡¥∞‡¥Ø‡µã‡¥ó‡¥µ‡µÅ‡¥Ç", chapters:[
        {title:"‡¥µ‡µç‡¥Ø‡¥æ‡¥ï‡¥∞‡¥£‡¥Ç ‚Äî ‡¥™‡µç‡¥∞‡¥Ø‡µã‡¥ó‡¥∂‡µà‡¥≤‡¥ø", 
         details:
`Important grammar topics: tenses, voice, agreement, punctuation, common errors. Practice correction, sentence transformation, fill-in-the-blanks.` ,
         probable:
`1) Correct the sentences (2 marks each).
2) Change the voice / direct-indirect speech (2 each).`,
         memory:"TEN ‚Äî Tense, Error, Number/agreement"}
      ]}
    ]
  },

  "English": {
    year:"2025‚Äì26",
    units:[
      {name:"Unit 1 ‚Äî Literature (Poems & Prose)", chapters:[
        {title:"Poems ‚Äî Close Reading & Theme",
         details:
`Poems: identify tone, theme, imagery, poetic devices (metaphor, simile, personification, alliteration), stanza-wise analysis. Write short critical appreciation for 6-mark answers.` ,
         probable:
`1) Critical appreciation of a poem (6).
2) Explain the use of imagery in stanza 2 (4).`,
         memory:"TIP: T-I-M-E ‚Äî Theme, Imagery, Meter, Emotion"},
        {title:"Prose ‚Äî Short Stories / Essays",
         details:
`Prose: summarize plot, character sketches, themes, author‚Äôs message. For essays, explain arguments with examples.` ,
         probable:
`1) Summarize the story in 80‚Äì100 words (3).
2) Character analysis (5).`,
         memory:"SPICE ‚Äî Summary, Plot, Ideas, Character, Example"}
      ]},
      {name:"Unit 2 ‚Äî Language Skills",
       chapters:[
         {title:"Grammar & Usage",
          details:
`Focus on tense forms, modals, active/passive, direct/indirect speech, prepositions, articles. Practice error spotting and sentence transformation.` ,
          probable:
`1) Fill in the blanks (8).
2) Error correction (4).`,
          memory:"GRAM ‚Äî Grammar Regular practice"},
         {title:"Writing ‚Äî Letters, Essays, Reports",
          details:
`Formats: formal/informal letters, essays (argue & support), report writing structure (title, intro, body, conclusion, suggestions). Practice sample letter & report.` ,
          probable:
`1) Write a formal letter (5).
2) Report on a school event (5).`,
          memory:"L-A-R ‚Äî Letter, Article, Report"}
       ]},
      {name:"Unit 3 ‚Äî Comprehension & Applied Skills",
        chapters:[
          {title:"Comprehension & Summary",
           details:
`Reading: skim & scan techniques, locating main idea, paraphrasing. For summary: identify central idea & remove examples.` ,
           probable:
`1) Answer comprehension questions (8).
2) Write a summary in 80 words (3).`,
           memory:"S-Q-A ‚Äî Skim, Quote, Answer"}
        ]}
    ]
  },

  "History": {
    year:"2025‚Äì26",
    units:[
      {name:"Themes in Indian History ‚Äî I", chapters:[
        {title:"Bricks, Beads and Bones (Harappan)",
         details:
`Key points: Urban planning, drainage, trade (with Mesopotamia), seals, craft specialization. Evidence from archaeology and what it tells about social organization.` ,
         probable:
`1) Describe urban planning features of Harappan cities (6).
2) Mention two major Harappan crafts (2).`,
         memory:"HAR ‚Äî Houses, Artifacts, Rivers"},
        {title:"Kings, Farmers and Towns",
         details:
`Transition from tribal to settled life; emergence of early states; role of agriculture, trade & taxation; social stratification.` ,
         probable:
`1) Explain emergence of early states (6).`,
         memory:"AGS ‚Äî Agriculture, State, Settlement"}
      ]},
      {name:"Themes in Indian History ‚Äî II", chapters:[
        {title:"Bhakti and Sufi Traditions",
         details:
`Religious movements: features of Bhakti & Sufi movements, their social impact (challenging caste, promoting devotion), major saints and literary contributions.` ,
         probable:
`1) Discuss the social impact of Bhakti movement (6).`,
         memory:"DEV ‚Äî Devotion, Equality, Voices"}
      ]},
      {name:"Themes in Indian History ‚Äî III", chapters:[
        {title:"Colonialism and the Countryside",
         details:
`Land revenue systems (Zamindari, Ryotwari), commercialization of agriculture, rural indebtedness, deindustrialization effects.` ,
         probable:
`1) Explain the effects of colonial land revenue policies on peasants (6).`,
         memory:"LAND ‚Äî Land, Agriculture, Neglect, Debt"}
      ]}
    ]
  },

  "Political Science": {
    year:"2025‚Äì26",
    units:[
      {name:"Part A ‚Äî Contemporary World Politics", chapters:[
        {title:"Cold War Era & Non-Alignment",
         details:
`Cold War: bipolar world, USA vs USSR, proxy wars, arms race. Non-Aligned Movement: origin, aims, leaders (Nehru, Nasser, Tito), role during Cold War.` ,
         probable:
`1) Explain main features of Cold War (6).
2) Write short note on NAM (4).`,
         memory:"COLD ‚Äî Conflict, Opposition, Leadership, Diplomacy"},
        {title:"The End of Bipolarity",
         details:
`Causes of collapse of USSR: economic stagnation, glasnost & perestroika, nationalist movements; effects: unipolar world, new security challenges.` ,
         probable:
`1) Analyze causes of end of bipolarity (6).`,
         memory:"END ‚Äî Economic issues, Nationalism, Democracy"}
      ]},
      {name:"Part B ‚Äî Politics in India", chapters:[
        {title:"Challenges of Nation Building",
         details:
`Integration of princely states, linguistic reorganization, land reforms, caste & communal tensions, creating institutions (constitution, judiciary).` ,
         probable:
`1) Discuss challenges India faced at independence (8).`,
         memory:"INTEG ‚Äî Integration steps"}
      ]}
    ]
  },

  "Sociology": {
    year:"2025‚Äì26",
    units:[
      {name:"Part A ‚Äî Indian Society", chapters:[
        {title:"Introducing Indian Society",
         details:
`Social structure: caste, class, kinship; features of Indian society; diversity & unity; institutions (family, religion).` ,
         probable:
`1) Define social structure and describe its elements (6).`,
         memory:"STRUCT ‚Äî System, Roles"},
        {title:"Social Institutions: Continuity and Change",
         details:
`Family types, marriage systems, changing patterns due to urbanization & education; role of media.` ,
         probable:
`1) Explain changes in family structure in India (6).`,
         memory:"FAM ‚Äî Family, Adaptation, Modernity"}
      ]},
      {name:"Part B ‚Äî Social Change & Development", chapters:[
        {title:"Social Movements",
         details:
`Types of social movements (reformative, revolutionary), case studies (Dalit movement, environmental movements), causes & consequences.` ,
         probable:
`1) Describe a social movement and its impact (6).`,
         memory:"MOTION ‚Äî Movement, Organization, Tactics"}
      ]}
    ]
  }
};

/* ---------------- APP STATE & HELPERS ---------------- */
const subjectsEl = document.getElementById('subjects');
const viewer = document.getElementById('viewer');
const searchInput = document.getElementById('search');
const planBtn = document.getElementById('plan80');

const SY_KEY = 'h2_edapal_syllabus_kerala_v1';
let state = JSON.parse(localStorage.getItem(SY_KEY) || '{}');

function slug(s){ return s.toLowerCase().replace(/\s+/g,'-').replace(/[^a-z0-9\-]/g,''); }
function save(){ localStorage.setItem(SY_KEY, JSON.stringify(state)); }

/* render subject cards */
function renderSubjects(filter=''){
  subjectsEl.innerHTML = '';
  Object.keys(SYLLABUS).forEach(sub=>{
    const meta = SYLLABUS[sub];
    if(filter){
      const text = (sub + JSON.stringify(meta)).toLowerCase();
      if(!text.includes(filter)) return;
    }
    const div = document.createElement('div');
    div.className = 'subject-card';
    div.innerHTML = `<div style="font-weight:700">${sub}</div><div class="muted">${meta.year} ‚Ä¢ ${meta.units.length} units</div>`;
    div.onclick = ()=> openSubject(sub, div);
    subjectsEl.appendChild(div);
  });
  viewer.innerHTML = `<div id="empty" style="text-align:center;padding:30px"><div style="font-weight:700;font-size:18px">Subject ‡¥§‡¥ø‡¥∞‡¥û‡µç‡¥û‡µÜ‡¥ü‡µÅ‡¥ï‡µç‡¥ï‡µÇ</div><div class="muted" style="margin-top:6px">Click a subject to view chapters and open detailed notes.</div></div>`;
}

/* open subject: list units & chapters */
function openSubject(sub, cardEl){
  document.querySelectorAll('.subject-card').forEach(c=>c.classList.remove('active'));
  cardEl && cardEl.classList.add('active');

  viewer.innerHTML = '';
  const header = document.createElement('div');
  header.innerHTML = `<div style="display:flex;justify-content:space-between;align-items:center"><h2 style="margin:0">${sub}</h2><div class="muted">(${SYLLABUS[sub].year})</div></div><div style="margin-top:8px" class="muted">Units & Chapters</div>`;
  viewer.appendChild(header);

  SYLLABUS[sub].units.forEach((u,ui)=>{
    const unitBox = document.createElement('div'); unitBox.style.marginTop='12px';
    unitBox.innerHTML = `<div style="font-weight:700">${u.name}</div>`;
    const ul = document.createElement('ul'); ul.className='unit-list';
    u.chapters.forEach((ch,ci)=>{
      const li = document.createElement('li');
      const id = `${slug(sub)}-u${ui}-c${ci}`;
      const done = state[sub]?.ticks?.[id];
      li.innerHTML = `<input type="checkbox" ${done?'checked':''} data-id="${id}" style="margin-top:6px"/>
        <div style="flex:1"><strong style="display:block">${ch.title}</strong><div class="muted" style="font-size:13px">${(ch.details||'').split('\\n')[0]}</div></div>
        <div style="display:flex;gap:8px"><button class="btn" data-open="${id}">Open</button></div>`;
      li.querySelector('button').onclick = (e)=>{ e.stopPropagation(); showChapter(sub,ui,ci); };
      li.querySelector('input[type="checkbox"]').onchange = (ev)=>{
        state[sub] = state[sub] || {}; state[sub].ticks = state[sub].ticks || {};
        state[sub].ticks[ev.target.dataset.id] = ev.target.checked;
        save();
      };
      ul.appendChild(li);
    });
    unitBox.appendChild(ul);
    viewer.appendChild(unitBox);
  });

  // actions
  const actions = document.createElement('div'); actions.style.marginTop='14px';
  actions.innerHTML = `<div style="display:flex;gap:8px;flex-wrap:wrap">
    <button class="btn" id="openFirst">Open first chapter</button>
    <button class="btn" id="clearProg" style="background:#ef4444">Clear progress</button>
    </div>`;
  viewer.appendChild(actions);
  document.getElementById('openFirst').onclick = ()=> { showChapter(sub,0,0); };
  document.getElementById('clearProg').onclick = ()=> {
    if(confirm('Clear saved progress & notes for '+sub+'?')){ delete state[sub]; save(); openSubject(sub, cardEl); }
  };
}

/* show chapter details (notes, probable qs, memory hook) */
function showChapter(sub, ui, ci){
  const ch = SYLLABUS[sub].units[ui].chapters[ci];
  const container = document.createElement('div'); container.className='chapter';
  container.innerHTML = `<h3>${ch.title}</h3>
    <div class="meta">Unit: ${SYLLABUS[sub].units[ui].name} &nbsp; ‚Ä¢ &nbsp; Subject: ${sub}</div>
    <div style="margin-top:10px;white-space:pre-line">${ch.details || 'No details available.'}</div>
    <div style="margin-top:12px"><strong>Probable Questions:</strong><pre style="white-space:pre-line;margin:6px 0">${ch.probable || ''}</pre></div>
    <div style="margin-top:6px"><strong>Memory Hook:</strong> <span class="pill">${ch.memory || '‚Äî'}</span></div>
    <div style="margin-top:12px">
      <div style="font-weight:700">Quick Notes (Autosave)</div>
      <textarea class="note" id="note-area" placeholder="‡¥®‡¥ø‡¥®‡¥ï‡µç‡¥ï‡µç ‡¥â‡¥™‡¥ï‡¥æ‡¥∞‡¥™‡µç‡¥™‡µÜ‡¥ü‡µÅ‡¥®‡µç‡¥® “õ—ã—Å–∫–∏–µ notes ‡¥á‡¥µ‡¥ø‡¥ü‡µÜ ‡¥é‡¥¥‡µÅ‡¥§‡µÇ‚Ä¶"></textarea>
      <div style="margin-top:8px;display:flex;gap:8px">
        <button class="btn" id="markDone">Mark Done</button>
        <button class="btn" id="shareIt" style="background:#10b981">Share</button>
      </div>
    </div>`;
  // replace viewer (desktop) or insert (mobile)
  if(window.innerWidth < 880){
    viewer.insertBefore(container, viewer.firstChild);
    container.scrollIntoView({behavior:'smooth'});
  } else {
    viewer.innerHTML = ''; viewer.appendChild(container);
  }

  // notes handling
  state.notes = state.notes || {};
  const noteKey = `${slug(sub)}-u${ui}-c${ci}-note`;
  const ta = container.querySelector('#note-area');
  ta.value = state.notes[noteKey] || '';
  ta.oninput = (e)=>{ state.notes[noteKey] = e.target.value; save(); };

  container.querySelector('#markDone').onclick = ()=>{
    state[sub] = state[sub] || {}; state[sub].ticks = state[sub].ticks || {};
    state[sub].ticks[`${slug(sub)}-u${ui}-c${ci}`] = true; save();
    alert('Marked done ‚Äî saved locally.');
  };

  container.querySelector('#shareIt').onclick = ()=>{
    const text = `${sub} ‚Äî ${ch.title}\n\n${ch.details || ''}\n\nProbable:\n${ch.probable || ''}\n\nNotes:\n${state.notes[noteKey] || '(none)'}`;
    if(navigator.share) navigator.share({title:ch.title, text}); else prompt('Copy to share', text);
  };
}

/* search */
searchInput.addEventListener('input', (e)=> renderSubjects(e.target.value.trim().toLowerCase()));

/* 80% plan: pick next undone chapters (1 per subject) */
planBtn.onclick = ()=>{
  const picks = [];
  Object.entries(SYLLABUS).forEach(([sub,meta])=>{
    for(let u=0; u<meta.units.length; u++){
      for(let c=0; c<meta.units[u].chapters.length; c++){
        const id = `${slug(sub)}-u${u}-c${c}`;
        const done = state[sub]?.ticks?.[id];
        if(!done){
          picks.push({sub, unit: meta.units[u].name, title: meta.units[u].chapters[c].title});
          u = meta.units.length; break;
        }
      }
    }
  });
  if(!picks.length) return alert('All chapters marked done ‚Äî great job!');
  const msg = picks.slice(0,12).map((p,i)=>`${i+1}. ${p.sub} ‚Äî ${p.unit} ‚Äî ${p.title}`).join('\n\n');
  alert('Next recommended chapters (quick 80% plan):\n\n' + msg);
};

/* init */
renderSubjects();

</script>
</body>
</html>
